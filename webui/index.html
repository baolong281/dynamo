<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamo Dev Console</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div>
                    <h1 class="title">
                        Dynamo Dev Console
                    </h1>
                    <p class="subtitle">Distributed Key-Value Store Interface</p>
                </div>
                <div class="header-controls">
                    <div class="global-node-selector">
                        <label class="label">Active Node:</label>
                        <select id="globalNodeSelect" class="select" onchange="onGlobalNodeChange()">
                            <option value="">Select a node...</option>
                        </select>
                    </div>
                    <a href="ring.html" class="btn btn-clear">
                        View Hash Ring â†’
                    </a>
                </div>
            </div>
        </header>

        <!-- Main Content Grid -->
        <div class="main-grid">
            <!-- Left Column: Admin & Monitoring -->
            <div class="left-column">
                <!-- Node Management Panel -->
                <section class="card">
                    <h2 class="card-title">
                        Node Management
                    </h2>
                    <div class="add-node-form">
                        <input type="text" id="nodeHost" placeholder="Host (e.g., localhost)" value="localhost" class="input">
                        <input type="number" id="nodePort" placeholder="Port" value="8080" class="input input-port">
                        <button onclick="addNode()" class="btn btn-primary">
                            Add Node
                        </button>
                    </div>
                    <div class="nodes-list" id="nodesList">
                        <div class="empty-state">No nodes configured. Add a node to get started.</div>
                    </div>
                </section>

                <!-- Cluster Membership -->
                <section class="card">
                    <h2 class="card-title">
                        Cluster Membership
                    </h2>
                    <div id="membershipList" class="membership-grid">
                        <div class="empty-state">Select a node to view cluster status.</div>
                    </div>
                </section>
            </div>

            <!-- Right Column: Operations & Results -->
            <div class="right-column">
                <!-- Operations Panel -->
                <div class="operations-grid">
                    <!-- PUT Operation -->
                    <section class="card">
                        <h2 class="card-title">
                            PUT Operation
                        </h2>
                        <div class="form-group">
                            <label class="label">Key</label>
                            <input type="text" id="putKey" placeholder="Enter key" class="input">
                            <small class="hint">Context will be used from previous GET if available</small>
                        </div>
                        <div class="form-group">
                            <label class="label">Value</label>
                            <textarea id="putValue" placeholder="Enter value (will be base64 encoded)" class="textarea" rows="3"></textarea>
                        </div>
                        <button onclick="executePut()" class="btn btn-success btn-block">
                            Execute PUT
                        </button>
                    </section>

                    <!-- GET Operation -->
                    <section class="card">
                        <h2 class="card-title">
                            GET Operation
                        </h2>
                        <div class="form-group">
                            <label class="label">Key</label>
                            <input type="text" id="getKey" placeholder="Enter key" class="input">
                            <small class="hint">Context will be stored for subsequent PUT operations</small>
                        </div>
                        <button onclick="executeGet()" class="btn btn-info btn-block">
                            Execute GET
                        </button>
                    </section>
                </div>

                <!-- Request/Response Display -->
                <section class="card response-card" id="responseSection" style="display: none;">
                    <h2 class="card-title">
                        Request & Response
                        <button onclick="clearResponse()" class="btn-clear">Clear</button>
                    </h2>
                    
                    <!-- Request Details -->
                    <div class="request-section">
                        <h2 class="section-header">ðŸ“¤ Request</h2>
                        <div class="response-status" id="requestStatus"></div>
                        <div class="response-content">
                            <h3 class="response-subtitle">Headers</h3>
                            <pre id="requestHeaders" class="response-pre"></pre>
                            <h3 class="response-subtitle">Body</h3>
                            <pre id="requestBody" class="response-pre"></pre>
                        </div>
                    </div>

                    <!-- Response Details -->
                    <div class="response-section">
                        <h2 class="section-header">ðŸ“¥ Response</h2>
                        <div class="response-status" id="responseStatus"></div>
                        <div class="response-content">
                            <h3 class="response-subtitle">Headers</h3>
                            <pre id="responseHeaders" class="response-pre"></pre>
                            <h3 class="response-subtitle">Body</h3>
                            <pre id="responseBody" class="response-pre"></pre>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
